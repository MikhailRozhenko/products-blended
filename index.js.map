{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/helpers.js","../src/js/modal.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["export const BASE_URL = 'https://dummyjson.com';\n\nexport const ENDPOINTS = {\n  CATEGORIES: '/products/category-list',\n  ALL_PRODUCTS: '/products?limit=12&skip=',\n  ONE_PRODUCT: '/products/',\n};\n\nexport const PAGE_SIZE = 12;\n","// API ендпоінти:\n// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// https://dummyjson.com/products/1 - отримати один продукт по ID\n// https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\nimport axios from 'axios';\nimport { BASE_URL, ENDPOINTS, PAGE_SIZE } from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function fetchCategories() {\n  const { data } = await axios(`${ENDPOINTS.CATEGORIES}`);\n  return data;\n}\n\nexport async function fetchProducts(page) {\n  const { data } = await axios(\n    `${ENDPOINTS.ALL_PRODUCTS}${(page - 1) * PAGE_SIZE}`\n  );\n  return data;\n}\n\nexport async function fetchOneProduct(id) {\n  const { data } = await axios(`${ENDPOINTS.ONE_PRODUCT}${id}`);\n  return data;\n}\n","export const refs = {\n  categoriesList: document.querySelector('.categories'),\n  productList: document.querySelector('ul.products'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  modal: document.querySelector('.modal'),\n  modalBackdrop: document.querySelector('.js-modal-backdrop'),\n  modalProduct: document.querySelector('.modal-product'),\n  modalClose: document.querySelector('.modal__close-btn'),\n};\n","import { refs } from './refs';\n\nexport function renderCategories(data) {\n  const markup = data\n    .map(\n      el => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${el}</button>\n </li>\n`\n    )\n    .join('');\n  refs.categoriesList.innerHTML = markup;\n}\n\nexport function renderProducts(products) {\n  const markup = products\n    .map(\n      ({\n        id,\n        thumbnail,\n        title,\n        brand,\n        category,\n        price,\n        description,\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${description}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\n    )\n    .join('');\n  refs.productList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function renderCardProduct({\n  thumbnail,\n  title,\n  shippingInformation,\n  price,\n  description,\n  tags,\n  returnPolicy,\n}) {\n  const markup = `<img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags\n          .map(tag => `<li>${tag}</li>`)\n          .join('')}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>`;\n\n  refs.modalProduct.innerHTML = markup;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './refs';\nimport { loadMoreProducts } from './handlers';\n\nexport const iziToastOption = {\n  timeout: 5000,\n  theme: 'dark',\n  messageColor: 'white',\n  iconColor: '#FFFFFF',\n  closeOnClick: true,\n  backgroundColor: '#ef4040',\n  position: 'topCenter',\n};\n\nexport function activeFirstBtn() {\n  const firstBtn = document.querySelector('.categories__btn');\n  if (firstBtn) {\n    firstBtn.classList.add('categories__btn--active');\n  }\n}\n\nexport function changeActiveButton(event) {\n  const onClickButton = document.querySelectorAll('.categories__btn');\n  onClickButton.forEach(element => {\n    if (element.classList.contains('categories__btn--active')) {\n      element.classList.remove('categories__btn--active');\n    }\n    event.target.classList.add('categories__btn--active');\n  });\n}\n\nexport function iziToastErrorMessage(error) {\n  iziToastOption.message = error.message;\n  iziToast.show(iziToastOption);\n}\n\nexport function clearGallery() {\n  refs.productList.innerHTML = '';\n}\n\nexport function loadMoreVisibleStatus(current, total) {\n  if (current < total) {\n    showLoadMore();\n    // Удаление обработчика перед повторным добавлением (защита от возможного дублирования)\n    refs.loadMoreBtn.removeEventListener('click', loadMoreProducts);\n    refs.loadMoreBtn.addEventListener('click', loadMoreProducts);\n  } else {\n    hideLoadMore();\n    refs.loadMoreBtn.removeEventListener('click', loadMoreProducts);\n    throw new Error('No more products to load');\n  }\n}\n\nexport function showLoadMore() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMore() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n","import { refs } from './refs';\n\nexport function openModal() {\n  refs.modal.classList.add('modal--is-open');\n\n  refs.modalClose.addEventListener('click', closeModal);\n  refs.modalBackdrop.addEventListener('click', closeBackdrop);\n\n  document.addEventListener('keydown', closeEscape);\n}\n\nfunction closeModal() {\n  refs.modal.classList.remove('modal--is-open');\n\n  refs.modalClose.removeEventListener('click', closeModal);\n  refs.modalBackdrop.removeEventListener('click', closeBackdrop);\n\n  document.removeEventListener('keydown', closeEscape);\n}\n\nexport function closeBackdrop(event) {\n  if (event.target === event.currentTarget) {\n    closeModal();\n  }\n}\n\nexport function closeEscape(event) {\n  if (event.code === 'Escape') {\n    closeModal();\n  }\n}\n","import {\n  fetchCategories,\n  fetchProducts,\n  fetchOneProduct,\n} from './products-api';\n\nimport {\n  renderCategories,\n  renderProducts,\n  renderCardProduct,\n} from './render-function';\n\nimport {\n  activeFirstBtn,\n  iziToastErrorMessage,\n  loadMoreVisibleStatus,\n} from './helpers';\n\nimport { PAGE_SIZE } from './constants';\nimport { refs } from './refs';\nimport { openModal } from './modal';\n\nlet currentPage = 1;\nlet totalPages = 0;\n\nexport async function getCategories() {\n  try {\n    const data = await fetchCategories();\n    renderCategories(['All', ...data]);\n    activeFirstBtn();\n  } catch (error) {\n    console.log(error);\n    iziToastErrorMessage({ message: 'Try again later!' });\n  }\n}\n\nexport async function getAllProducts() {\n  try {\n    const data = await fetchProducts(currentPage);\n    const totalProducts = data.total;\n    totalPages = Math.ceil(totalProducts / PAGE_SIZE);\n\n    renderProducts(data.products);\n\n    refs.productList.addEventListener('click', event => {\n      event.preventDefault();\n      getCardProduct(event);\n    });\n\n    loadMoreVisibleStatus(currentPage, totalPages);\n  } catch (error) {\n    totalPages = 0;\n    console.log(error);\n    iziToastErrorMessage(error);\n  }\n}\n\nexport async function loadMoreProducts() {\n  currentPage += 1;\n\n  try {\n    loadMoreVisibleStatus(currentPage, totalPages);\n    const data = await fetchProducts(currentPage);\n    renderProducts(data.products);\n  } catch (error) {\n    console.log(error);\n    iziToastErrorMessage(error);\n  }\n}\n\nexport async function getCardProduct(event) {\n  try {\n    if (!event.target.closest('.products__item')) {\n      return;\n    }\n\n    const productID = event.target.closest('.products__item').dataset.id;\n    const data = await fetchOneProduct(`${productID}`);\n\n    renderCardProduct(data);\n    openModal();\n  } catch (error) {\n    iziToastErrorMessage(error);\n  }\n}\n","//Логіка сторінки Home\n\nimport { getCategories, getAllProducts, getCardProduct } from './js/handlers';\nimport { refs } from './js/refs';\n\ngetCategories();\ngetAllProducts();\n"],"names":["BASE_URL","ENDPOINTS","PAGE_SIZE","axios","fetchCategories","data","fetchProducts","page","fetchOneProduct","id","refs","renderCategories","markup","el","renderProducts","products","thumbnail","title","brand","category","price","description","renderCardProduct","shippingInformation","tags","returnPolicy","tag","iziToastOption","activeFirstBtn","firstBtn","iziToastErrorMessage","error","iziToast","loadMoreVisibleStatus","current","total","showLoadMore","loadMoreProducts","hideLoadMore","openModal","closeModal","closeBackdrop","closeEscape","event","currentPage","totalPages","getCategories","getAllProducts","totalProducts","getCardProduct","productID"],"mappings":"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"}